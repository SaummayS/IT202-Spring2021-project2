<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Proj:2</title>
    </head>
    <body>
        <canvas width="626" height="400"></canvas>

        <script>
            let c = document.querySelector("canvas")
            c.style.backgroundColor = "silver"
            let ctx = c.getContext("2d")
            let bg = new Image()
            bg.src = "images/field.jpg"

            let fball = new Image()
            fball.src = "images/fball1.png"

            let x = c.width/2
            let y = c.height/2
            let fx = 10
            let fy = 10
            let r = 30
            let fr = 100

            let gameObjs = [];
            gameObjs.push( {x: x, y: y, radius: r, color: "red" } )
            gameObjs.push( {x: x-50, y: y+50, radius: r-10, color: "orange" } )
            //gameObjs.push( {x: fx, y: fy} )

            ctx.fillStyle = "red"

            const draw = () => {
                ctx.clearRect(0, 0, c.width, c.height);

                // x -= 1;

                // if(x<-r){
                //     x = c.width + r
                // }
                ctx.drawImage(bg,0,0)

                ctx.drawImage(fball,fx,fy)

                gameObjs.forEach( (obj) => {
                obj.x -= 1;

                if(obj.x<-obj.radius){
                    obj.x = c.width + obj.radius
                    obj.y = Math.random() * (c.height-obj.radius)
                }

                ctx.beginPath()
                ctx.arc(obj.x, obj.y, obj.radius, 0, Math.PI*2);
                ctx.closePath();
                ctx.fillStyle = obj.color;
                ctx.fill();
                });


                // ctx.beginPath();
                // ctx.arc( x, y, r, 0, Math.PI*2)
                // ctx.fillStyle = "red"
                // ctx.fill()
                // ctx.closePath();

                // ctx.beginPath();
                // ctx.fillStyle = "green"
                // ctx.arc( x-50, y+50, r-10, 0, Math.PI*2)
                // ctx.fill()
                // ctx.closePath();
                window.requestAnimationFrame(draw);
            }

            draw();

            document.addEventListener("keydown",(event) =>{

                switch (event.keyCode){
                    case 38:
                        fy-= 10
                        break;
                    case 40:
                        fy+= 10
                        break;
                    default:
                        console.log("This feature would soon be updated")
                }  
            })

            // function areColliding (circ1, circ2) {
            // //console.log("hello world")

            // const dx = circ1.x - circ2.x;
            // const dy = circ1.y - circ2.y;
            // const distance = Math.sqrt(dx * dx + dy * dy);

            // if (distance < circ1.radius + circ2.radius) {
            // // collision detected!
            // return true
            // }
            // return false
            // }
        </script>
    </body>
</html>